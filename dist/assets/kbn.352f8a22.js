import{g as z,p as R}from"./index.276399f2.js";import{b as V}from"./index.fabc4a2b.js";import{A as j,a2 as K,C as H,d as I,a as s,o as A,g as C,h as u,w as e,b as l,U as E,r as h,e as k,v as O,k as P,V as N,S as W,a3 as G,u as i,_ as J}from"./index.96e56669.js";import{u as Q}from"./use-message.e2dbd966.js";import"./index.83f7d8fe.js";function X(){const n=j(K,null);return n===null&&H("use-loading-bar","No outer <n-loading-bar-provider /> founded."),n}const Y=n=>n instanceof Date?n:new Date(n),Z=n=>{let _=Y(n);return V(_)},ee=l("\u{1F6EB}"),ue=I({props:{info:null},setup(n){var f;const c=Z((f=n.info)==null?void 0:f.createdAt);return(b,d)=>{const r=s("n-divider"),m=s("n-card");return A(),C("div",null,[u(r,{"title-placement":"center"},{default:e(()=>[ee]),_:1}),u(m,{bordered:!1,title:" "},{"header-extra":e(()=>{var p;return[l(E(c.value)+" #"+E((p=n.info)==null?void 0:p.id),1)]}),action:e(()=>{var p,B;return[l(E((p=n.info)==null?void 0:p.authorName)+"\uFF1A\u201C"+E((B=n.info)==null?void 0:B.content)+"\u201D ",1)]}),_:1})])}}}),te=l("Congb19 \u7684\u89E3\u5FE7\u6742\u8D27\u94FA "),ne=l(" \u{1F6EB} "),oe=l(" \u6211\u8981\u5206\u4EAB\u5FEB\u4E50 "),ae=l(" \u{1F4A2} "),le=l(" \u6211\u6709\u70E6\u607C\u6C42\u52A9 "),se=l(" \u{1F6EB} "),re=l(" \u53D1\u9001 "),ie=I({setup(n){const _=Q(),c=X();let f=h(1),b=h([]),d=h(1);const r=k(()=>({title:d.value==1?"\u5206\u4EAB\u5FEB\u4E50\uFF01":"\u70E6\u607C\u6C42\u52A9",authorName:"\u8BE5\u600E\u4E48\u79F0\u547C\u4F60\uFF1F\u6211\u53EB Congb19",content:d.value==1?"\u4ECA\u5929\u559D\u4E86\u5965\u5965\u6930\u6930\u5496\u5561\uFF0C\u7279\u522B\u597D\u559D":"\u7EA6\u4EBA\u770B\u7535\u5F71\uFF0C\u7ED3\u679C\u88AB \u{1F54A} \u4E86",contactInfo:d.value==1?"\u53EF\u4EE5\u4E0D\u5199":"\u5982\u679C\u6211\u80FD\u5E2E\u5230\u4F60\uFF0C\u6211\u4F1A\u6765\u627E\u4F60\u7684\uFF01",shareSuccess:d.value==1?"\u5206\u4EAB\u6210\u529F\uFF01\u6211\u5BA1\u6838\u901A\u8FC7\u540E\u5C31\u4F1A\u5C55\u793A\u51FA\u6765\u5566\u3002":"\u5206\u4EAB\u6210\u529F\uFF01\u6211\u4F1A\u627E\u4E2A\u65F6\u95F4\u6765\u8054\u7CFB\u4F60\u7684\u3002",shareFailed:"\u62B1\u6B49\uFF0C\u670D\u52A1\u5668\u597D\u50CF\u51FA\u4E86\u70B9\u95EE\u9898",incomplete:"\u8BF7\u586B\u5199\u5B8C\u6574"}));let m=h(!1);const p=o=>{d.value=o,m.value=!0};let B={width:"600px",borderRadius:"10px"},F=O({content:"",contactInfo:"",authorName:""}),S=k(()=>({authorName:{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0",trigger:["input","blur"]},content:{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:["input","blur"]},contactInfo:{required:d.value==2,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u65B9\u5F0F",trigger:["input","blur"]}}));const x=h(null),T=async()=>{var o;(o=x.value)==null||o.validate(async t=>{var v;if(t)_.warning(r.value.incomplete);else{const y={type:d.value,...F};c.start(),((v=(await R(y)).data)==null?void 0:v.code)==200?(c.finish(),_.success(r.value.shareSuccess,{duration:4e3}),m.value=!1):(c.error(),_.error(r.value.shareFailed,{duration:4e3}))}})},U=()=>{let o=new Date(2021,8,24);f.value=Math.ceil((Date.now()-o.getTime())/(1e3*60*60*24))},q=()=>{console.log("\u6B22\u8FCE\u5927\u5BB6\u5149\u4E34\uFF01\u5DF2\u8425\u4E1A",f.value,"\u5929")};return P(async()=>{U(),q(),c.start();let o=await z();o&&(o==null?void 0:o.code)==200?(c.finish(),b.value.push(...o.data.sort((t,v)=>v.id-t.id))):c.error()}),(o,t)=>{const v=s("n-h1"),y=s("n-h3"),g=s("n-button"),L=s("n-button-group"),D=s("n-input"),w=s("n-form-item"),M=s("n-form"),$=s("n-modal");return A(),C(N,null,[u(v,null,{default:e(()=>[te]),_:1}),u(y,null,{default:e(()=>[l("\u2014\u2014\u5DF2\u8425\u4E1A "+E(f.value)+" \u5929",1)]),_:1}),u(L,{size:"large"},{default:e(()=>[u(g,{type:"success",round:"",onClick:t[0]||(t[0]=a=>p(1))},{icon:e(()=>[ne]),default:e(()=>[oe]),_:1}),u(g,{type:"error",round:"",onClick:t[1]||(t[1]=a=>p(2))},{icon:e(()=>[ae]),default:e(()=>[le]),_:1})]),_:1}),(A(!0),C(N,null,W(b.value,a=>(A(),C("div",{key:a.id},[u(ue,{info:a},null,8,["info"])]))),128)),u($,{class:"cb-modal",show:m.value,"onUpdate:show":t[5]||(t[5]=a=>m.value=a),preset:"card",style:G(i(B)),title:r.value.title,size:"medium",bordered:!1},{footer:e(()=>[u(g,{type:"success",round:"",onClick:T},{icon:e(()=>[se]),default:e(()=>[re]),_:1})]),default:e(()=>[u(M,{ref_key:"formRef",ref:x,model:i(F),rules:i(S),"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",style:{maxWidth:"600px"}},{default:e(()=>[u(w,{label:"\u6635\u79F0 \u{1F36A}",path:"authorName"},{default:e(()=>[u(D,{value:i(F).authorName,"onUpdate:value":t[2]||(t[2]=a=>i(F).authorName=a),placeholder:r.value.authorName},null,8,["value","placeholder"])]),_:1}),u(w,{label:"\u5185\u5BB9 \u2753",path:"content"},{default:e(()=>[u(D,{value:i(F).content,"onUpdate:value":t[3]||(t[3]=a=>i(F).content=a),type:"textarea",placeholder:r.value.content},null,8,["value","placeholder"])]),_:1}),u(w,{label:"\u8054\u7CFB\u65B9\u5F0F \u{1F4E7}",path:"contactInfo"},{default:e(()=>[u(D,{value:i(F).contactInfo,"onUpdate:value":t[4]||(t[4]=a=>i(F).contactInfo=a),placeholder:r.value.contactInfo},null,8,["value","placeholder"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","style","title"])],64)}}});const fe=J(ie,[["__scopeId","data-v-fc0e1bee"]]);export{fe as default};
